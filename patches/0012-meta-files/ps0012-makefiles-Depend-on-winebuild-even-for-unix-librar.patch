From: Zebediah Figura <zfigura@codeweavers.com>
Subject: [PATCH] makefiles: Depend on winebuild even for unix libraries.
Message-Id: <20210917200912.9677-1-zfigura@codeweavers.com>
Date: Fri, 17 Sep 2021 15:09:12 -0500

winegcc runs `winebuild --fixup-ctors` when building them.

Signed-off-by: Zebediah Figura <zfigura@codeweavers.com>
---
 tools/makedep.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/tools/makedep.c b/tools/makedep.c
index eff8e33d3a3..9fa6d8c7f56 100644
--- a/tools/makedep.c
+++ b/tools/makedep.c
@@ -3394,7 +3394,7 @@ static void output_module( struct makefile *make )
         output( "%s:", obj_dir_path( make, unix_lib ));
         output_filenames_obj_dir( make, make->unixobj_files );
         output_filenames( unix_deps );
-        if (!native_unix_lib) output_filename( tools_path( make, "winebuild" ));
+        output_filename( tools_path( make, "winebuild" ));
         output_filename( tools_path( make, "winegcc" ));
         output( "\n" );
         output_winegcc_command( make, 0 );

-- 
2.33.0

