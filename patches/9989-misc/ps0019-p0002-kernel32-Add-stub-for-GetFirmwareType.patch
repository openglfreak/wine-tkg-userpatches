From: "Myah Caron" <qsniyg@mail.com>
Subject: [PATCH v2 2/3] kernel32: Add stub for GetFirmwareType
Message-Id: <trinity-eaa749be-b297-4247-8374-8e0d55140071-1584276938503@3c-app-mailcom-lxa12>
Date: Sun, 15 Mar 2020 13:55:38 +0100

Signed-off-by "Myah Caron" <qsniyg@mail.com>
---
 dlls/kernel32/kernel32.spec | 1 +
 dlls/kernel32/process.c     | 9 +++++++++
 include/winnt.h             | 7 +++++++
 3 files changed, 17 insertions(+)

diff --git a/dlls/kernel32/kernel32.spec b/dlls/kernel32/kernel32.spec
index 11111111111..11111111111 100644
--- a/dlls/kernel32/kernel32.spec
+++ b/dlls/kernel32/kernel32.spec
@@ -693,6 +693,7 @@
 @ stdcall GetFirmwareEnvironmentVariableW(wstr wstr ptr long)
 @ stdcall GetFirmwareEnvironmentVariableExA(str str ptr long ptr)
 @ stdcall GetFirmwareEnvironmentVariableExW(wstr wstr ptr long ptr)
+@ stdcall GetFirmwareType(ptr)
 @ stdcall -import GetFullPathNameA(str long ptr ptr)
 # @ stub GetFullPathNameTransactedA
 # @ stub GetFullPathNameTransactedW
diff --git a/dlls/kernel32/process.c b/dlls/kernel32/process.c
index 11111111111..11111111111 100644
--- a/dlls/kernel32/process.c
+++ b/dlls/kernel32/process.c
@@ -994,3 +994,12 @@ DWORD WINAPI GetFirmwareEnvironmentVariableExW(LPCWSTR name, LPCWSTR guid, PVOID
     SetLastError(ERROR_INVALID_FUNCTION);
     return 0;
 }
+
+/***********************************************************************
+ *              GetFirmwareType                           (KERNEL32.@)
+ */
+BOOL WINAPI GetFirmwareType(PFIRMWARE_TYPE firmware_type) {
+    FIXME("stub: %p\n", firmware_type);
+    SetLastError(ERROR_INVALID_FUNCTION);
+    return 0;
+}
diff --git a/include/winnt.h b/include/winnt.h
index 11111111111..11111111111 100644
--- a/include/winnt.h
+++ b/include/winnt.h
@@ -6740,6 +6740,13 @@ static FORCEINLINE void YieldProcessor(void)
 #endif
 }
 
+typedef enum _FIRMWARE_TYPE {
+    FirmwareTypeUnknown,
+    FirmwareTypeBios,
+    FirmwareTypeUefi,
+    FirmwareTypeMax
+} FIRMWARE_TYPE, *PFIRMWARE_TYPE;
+
 #ifdef __cplusplus
 }
 #endif
