From: Zebediah Figura <zfigura@codeweavers.com>
Subject: [PATCH 3/4] wineusb.sys: Mark child PDOs as removed as soon as they are hot-unplugged.
Message-Id: <20210821000127.3418932-3-zfigura@codeweavers.com>
Date: Fri, 20 Aug 2021 19:01:26 -0500
In-Reply-To: <20210821000127.3418932-1-zfigura@codeweavers.com>
References: <20210821000127.3418932-1-zfigura@codeweavers.com>

Signed-off-by: Zebediah Figura <zfigura@codeweavers.com>
---
 dlls/wineusb.sys/wineusb.c | 1 +
 1 file changed, 1 insertion(+)

diff --git a/dlls/wineusb.sys/wineusb.c b/dlls/wineusb.sys/wineusb.c
index fae297915fc..a19da6df8f4 100644
--- a/dlls/wineusb.sys/wineusb.c
+++ b/dlls/wineusb.sys/wineusb.c
@@ -144,6 +144,7 @@ static void remove_usb_device(libusb_device *libusb_device)
     {
         if (device->libusb_device == libusb_device)
         {
+            device->removed = TRUE;
             list_remove(&device->entry);
             break;
         }

-- 
2.30.2

