From: Andrew Eikum <aeikum@codeweavers.com>
Subject: [PATCH] shell32: Use correct environment substitution for FOLDERID_Public
Message-Id: <20210601164549.GG6343@foghorn.codeweavers.com>
Date: Tue, 1 Jun 2021 11:45:51 -0500

Signed-off-by: Andrew Eikum <aeikum@codeweavers.com>
---

This fixes the userenv failure:

    https://www.winehq.org/pipermail/wine-devel/2021-May/187877.html

 dlls/shell32/shellpath.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/dlls/shell32/shellpath.c b/dlls/shell32/shellpath.c
index 3be759bf616..f71b660a7aa 100644
--- a/dlls/shell32/shellpath.c
+++ b/dlls/shell32/shellpath.c
@@ -2783,9 +2783,9 @@ static const CSIDL_DATA CSIDL_Data[] =
     },
     { /* 0x56 */
         &FOLDERID_Public,
-        CSIDL_Type_CurrVer, /* FIXME */
+        CSIDL_Type_AllUsers,
+        NULL,
         NULL,
-        UsersPublicW,
 
         KF_CATEGORY_FIXED, /* category */
         PublicW, /* name */

-- 
2.31.1

