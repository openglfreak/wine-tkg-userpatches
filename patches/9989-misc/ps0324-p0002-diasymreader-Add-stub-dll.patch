From: Esme Povirk <esme@codeweavers.com>
Subject: [PATCH 2/5] diasymreader: Add stub dll
Message-Id: <20220128190054.662812-2-esme@codeweavers.com>
Date: Fri, 28 Jan 2022 13:00:51 -0600
In-Reply-To: <20220128190054.662812-1-esme@codeweavers.com>
References: <20220128190054.662812-1-esme@codeweavers.com>

Signed-off-by: Esme Povirk <esme@codeweavers.com>
---
 configure.ac                        | 1 +
 dlls/diasymreader/Makefile.in       | 3 +++
 dlls/diasymreader/diasymreader.spec | 8 ++++++++
 loader/wine.inf.in                  | 2 ++
 4 files changed, 14 insertions(+)
 create mode 100644 dlls/diasymreader/Makefile.in
 create mode 100644 dlls/diasymreader/diasymreader.spec

diff --git a/configure.ac b/configure.ac
index 0aad012060e..4396981f69c 100644
--- a/configure.ac
+++ b/configure.ac
@@ -2738,6 +2738,7 @@ WINE_CONFIG_MAKEFILE(dlls/dhcpcsvc)
 WINE_CONFIG_MAKEFILE(dlls/dhcpcsvc/tests)
 WINE_CONFIG_MAKEFILE(dlls/dhcpcsvc6)
 WINE_CONFIG_MAKEFILE(dlls/dhtmled.ocx)
+WINE_CONFIG_MAKEFILE(dlls/diasymreader)
 WINE_CONFIG_MAKEFILE(dlls/difxapi)
 WINE_CONFIG_MAKEFILE(dlls/dinput)
 WINE_CONFIG_MAKEFILE(dlls/dinput/tests)
diff --git a/dlls/diasymreader/Makefile.in b/dlls/diasymreader/Makefile.in
new file mode 100644
index 00000000000..6cc5541adff
--- /dev/null
+++ b/dlls/diasymreader/Makefile.in
@@ -0,0 +1,3 @@
+MODULE    = diasymreader.dll
+
+EXTRADLLFLAGS = -Wb,--prefer-native
diff --git a/dlls/diasymreader/diasymreader.spec b/dlls/diasymreader/diasymreader.spec
new file mode 100644
index 00000000000..9277fb1bcd9
--- /dev/null
+++ b/dlls/diasymreader/diasymreader.spec
@@ -0,0 +1,8 @@
+@ stub CreateNGenPdbWriter
+@ stub DllCanUnloadNow
+@ stub DllGetClassObject
+@ stub DllGetClassObjectInternal
+@ stub DllRegisterServer
+@ stub DllUnregisterServer
+@ stub VSDllRegisterServer
+@ stub VSDllUnregisterServer
diff --git a/loader/wine.inf.in b/loader/wine.inf.in
index 2fd4fbd22ea..077338bc32e 100644
--- a/loader/wine.inf.in
+++ b/loader/wine.inf.in
@@ -2635,6 +2635,7 @@ HKLM,%CurrentVersion%\Telephony\Country List\998,"SameAreaRule",,"G"
 11,,aspnet_regiis.exe,-
 11,,ngen.exe,-
 11,,fusion.dll,-
+11,,diasymreader.dll,-
 11,,mscorwks.dll,-
 11,,regsvcs.exe,-
 11,,regasm.exe,-
@@ -2689,6 +2690,7 @@ HKLM,%CurrentVersion%\Telephony\Country List\998,"SameAreaRule",,"G"
 11,,aspnet_regiis.exe,-
 11,,ngen.exe,-
 11,,fusion.dll,-
+11,,diasymreader.dll,-
 11,,mscorwks.dll,-
 11,,regsvcs.exe,-
 11,,regasm.exe,-

-- 
2.30.2

