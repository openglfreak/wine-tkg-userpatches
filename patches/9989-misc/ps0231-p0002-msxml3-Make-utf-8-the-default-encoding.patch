From: Daniel Lehman <dlehman@esri.com>
#Subject: [PATCH 2/2] msxml3: Make utf-8 the default encoding.
Message-Id: <PH0PR05MB75114845376E235D6E8A3562DF619@PH0PR05MB7511.namprd05.prod.outlook.com>
Date: Wed, 24 Nov 2021 18:03:55 +0000


From 09018d375158c65b61429df00b97a9de7a0f9968 Mon Sep 17 00:00:00 2001
From: Daniel Lehman <dlehman@esri.com>
Date: Wed, 24 Nov 2021 08:33:06 -0800
Subject: [PATCH 2/2] msxml3: Make utf-8 the default encoding.

Signed-off-by: Daniel Lehman <dlehman@esri.com>
---
 dlls/msxml3/domdoc.c       | 3 +++
 dlls/msxml3/tests/domdoc.c | 2 +-
 2 files changed, 4 insertions(+), 1 deletion(-)

diff --git a/dlls/msxml3/domdoc.c b/dlls/msxml3/domdoc.c
index 4013f106cc67..082d7950f8d7 100644
--- a/dlls/msxml3/domdoc.c
+++ b/dlls/msxml3/domdoc.c
@@ -2603,6 +2603,9 @@ static char *xmldoc_encoding(IXMLDOMDocument3 *doc)
         IXMLDOMNode_Release(node);
     }
 
+    if (!encoding && (encoding = heap_alloc(sizeof("UTF-8"))))
+        strcpy(encoding, "UTF-8");
+
     return encoding;
 }
 
-- 
2.27.0

