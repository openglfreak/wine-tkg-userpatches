From: Santino Mazza <mazzasantino1206@gmail.com>
Subject: [PATCH v2 4/6] ncrypt/tests: Test for symmetric keys support.
Message-Id: <20220306152301.133934-4-mazzasantino1206@gmail.com>
Date: Sun,  6 Mar 2022 12:22:59 -0300
In-Reply-To: <20220306152301.133934-1-mazzasantino1206@gmail.com>
References: <20220306152301.133934-1-mazzasantino1206@gmail.com>

Signed-off-by: Santino Mazza <mazzasantino1206@gmail.com>
---
 dlls/ncrypt/tests/ncrypt.c | 12 ++++++++++++
 1 file changed, 12 insertions(+)

diff --git a/dlls/ncrypt/tests/ncrypt.c b/dlls/ncrypt/tests/ncrypt.c
index d1bcbbcab2a..f4eb7207d2d 100644
--- a/dlls/ncrypt/tests/ncrypt.c
+++ b/dlls/ncrypt/tests/ncrypt.c
@@ -291,6 +291,18 @@ static void test_create_persisted_key(void)
 
     NCryptFinalizeKey(key, 0);
     NCryptFreeObject(key);
+
+    todo_wine
+    {
+    key = 0;
+    ret = NCryptCreatePersistedKey(prov, &key, BCRYPT_AES_ALGORITHM, NULL, 0, 0);
+    ok(ret == ERROR_SUCCESS || broken(ret == NTE_NOT_SUPPORTED) /* win 7 */, "got %#lx\n", ret);
+    if (ret != NTE_NOT_SUPPORTED)
+    {
+        ok(key, "got null handle\n");
+    }
+    }
+
     NCryptFreeObject(prov);
     }
 }

-- 
2.32.0

