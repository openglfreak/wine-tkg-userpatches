From: Jinoh Kang <jinoh.kang.kr@gmail.com>
Subject: [PATCH v3 4/4] kernelbase: Implement CompareObjectHandles.
Message-Id: <6a76df0a-60ba-11ed-6089-0f617e115227@gmail.com>
Date: Sun, 28 Nov 2021 19:41:36 +0900
In-Reply-To: <09cee0b6-5836-f90a-79ac-385a49c6fe83@gmail.com>
References: <09cee0b6-5836-f90a-79ac-385a49c6fe83@gmail.com>

Signed-off-by: Jinoh Kang <jinoh.kang.kr@gmail.com>
---
 dlls/kernelbase/kernelbase.spec | 2 +-
 dlls/kernelbase/process.c       | 9 +++++++++
 2 files changed, 10 insertions(+), 1 deletion(-)

diff --git a/dlls/kernelbase/kernelbase.spec b/dlls/kernelbase/kernelbase.spec
index be40e425783..7bc0c262fdd 100644
--- a/dlls/kernelbase/kernelbase.spec
+++ b/dlls/kernelbase/kernelbase.spec
@@ -153,7 +153,7 @@
 @ stdcall CloseThreadpoolWork(ptr) ntdll.TpReleaseWork
 # @ stub CommitStateAtom
 @ stdcall CompareFileTime(ptr ptr)
-# @ stub CompareObjectHandles
+@ stdcall CompareObjectHandles(ptr ptr)
 @ stdcall CompareStringA(long long str long str long)
 @ stdcall CompareStringEx(wstr long wstr long wstr long ptr ptr long)
 @ stdcall CompareStringOrdinal(wstr long wstr long long)
diff --git a/dlls/kernelbase/process.c b/dlls/kernelbase/process.c
index 5973eb7d933..0e4a3eb9b6b 100644
--- a/dlls/kernelbase/process.c
+++ b/dlls/kernelbase/process.c
@@ -1771,3 +1771,12 @@ void WINAPI DECLSPEC_HOTPATCH DeleteProcThreadAttributeList( struct _PROC_THREAD
 {
     return;
 }
+
+
+/***********************************************************************
+ *              CompareObjectHandles   (kernelbase.@)
+ */
+BOOL WINAPI DECLSPEC_HOTPATCH CompareObjectHandles( HANDLE first, HANDLE second )
+{
+    return set_ntstatus( NtCompareObjects( first, second ));
+}

-- 
2.31.1

