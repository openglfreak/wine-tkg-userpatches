From: Vijay Kiran Kamuju <infyquest@gmail.com>
#Subject: [PATCH v2] msdrm: Add stub DRMRegisterContent function.
Message-Id: <CACfa+K+ZKT=B_7qYFMqjGT-7fmk1YSpNP7+XWuNcJp7fYEe-0g@mail.gmail.com>
Date: Thu, 4 Feb 2021 22:09:18 +0100

Wine-Bug: https://bugs.winehq.org/show_bug.cgi?id=50595

Signed-off-by: Vijay Kiran Kamuju <infyquest@gmail.com>

<div dir="ltr">Wine-Bug: <a href="https://bugs.winehq.org/show_bug.cgi?id=50595">https://bugs.winehq.org/show_bug.cgi?id=50595</a><br><br>Signed-off-by: Vijay Kiran Kamuju &lt;<a href="mailto:infyquest@gmail.com">infyquest@gmail.com</a>&gt;<br></div>

From d9e9455f9d183ada40383ae87a2413cc5733198c Mon Sep 17 00:00:00 2001
From: Vijay Kiran Kamuju <infyquest@gmail.com>
Date: Thu, 4 Feb 2021 20:46:06 +0100
Subject: [PATCH v2] msdrm: Add stub DRMRegisterContent function.

Wine-Bug: https://bugs.winehq.org/show_bug.cgi?id=50595

Signed-off-by: Vijay Kiran Kamuju <infyquest@gmail.com>
---
 dlls/msdrm/Makefile.in |  4 ++++
 dlls/msdrm/main.c      | 11 +++++++++++
 dlls/msdrm/msdrm.spec  |  2 +-
 3 files changed, 40 insertions(+), 2 deletions(-)

diff --git a/dlls/msdrm/Makefile.in b/dlls/msdrm/Makefile.in
index 6f61c26b053..07d04d4f861 100644
--- a/dlls/msdrm/Makefile.in
+++ b/dlls/msdrm/Makefile.in
@@ -1,3 +1,6 @@
 MODULE    = msdrm.dll
 
-EXTRADLLFLAGS = -Wb,--prefer-native
+EXTRADLLFLAGS = -mno-cygwin -Wb,--prefer-native
+
+C_SRCS = \
+	main.c
diff --git /dev/null b/dlls/msdrm/main.c
new file mode 100644
index 0000000000..1cd07f5f879 100644
--- /dev/null
+++ b/dlls/msdrm/main.c
@@ -0,0 +1,35 @@
+/*
+ * msdrm.dll
+ *
+ * Copyright 2016 Austin English
+ *
+ * This library is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU Lesser General Public
+ * License as published by the Free Software Foundation; either
+ * version 2.1 of the License, or (at your option) any later version.
+ *
+ * This library is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ * Lesser General Public License for more details.
+ *
+ * You should have received a copy of the GNU Lesser General Public
+ * License along with this library; if not, write to the Free Software
+ * Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301, USA
+ */
+
+#include <stdarg.h>
+
+#include "wine/debug.h"
+
+#include "windef.h"
+#include "winbase.h"
+
+WINE_DEFAULT_DEBUG_CHANNEL(msdrm);
+
+HRESULT WINAPI DRMRegisterContent(BOOL value)
+{
+    FIXME("(%u): stub\n", value);
+
+    return S_OK;
+}
diff --git a/dlls/msdrm/msdrm.spec b/dlls/msdrm/msdrm.spec
index 5d4d3d61bce..85cbb02541d 100644
--- a/dlls/msdrm/msdrm.spec
+++ b/dlls/msdrm/msdrm.spec
@@ -70,7 +70,7 @@
 @ stub DRMIsWindowProtected
 @ stub DRMLoadLibrary
 @ stub DRMParseUnboundLicense
-@ stub DRMRegisterContent
+@ stdcall DRMRegisterContent(long)
 @ stub DRMRegisterProtectedWindow
 @ stub DRMRegisterRevocationList
 @ stub DRMRepair

-- 
2.30.0

