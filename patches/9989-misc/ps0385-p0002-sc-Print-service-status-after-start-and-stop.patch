From: Dmitry Timoshkov <dmitry@baikal.ru>
Subject: [PATCH v2 2/3] sc: Print service status after 'start' and 'stop' commands.
Message-Id: <20220322172237.645ab74cd0effcb7a08a959a@baikal.ru>
Date: Tue, 22 Mar 2022 17:22:37 +0300

Like Windows 10 sc.exe does.

Signed-off-by: Dmitry Timoshkov <dmitry@baikal.ru>
---
 programs/sc/sc.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/programs/sc/sc.c b/programs/sc/sc.c
index 11111111111..11111111111 100644
--- a/programs/sc/sc.c
+++ b/programs/sc/sc.c
@@ -322,6 +322,7 @@ int __cdecl wmain( int argc, const WCHAR *argv[] )
         {
             ret = StartServiceW( service, argc - 3, argv + 3 );
             if (!ret) WINE_TRACE("failed to start service %lu\n", GetLastError());
+            else query_service( manager, argv[2] );
             CloseServiceHandle( service );
         }
         else WINE_ERR("failed to open service %lu\n", GetLastError());
@@ -333,6 +334,7 @@ int __cdecl wmain( int argc, const WCHAR *argv[] )
         {
             ret = ControlService( service, SERVICE_CONTROL_STOP, &status );
             if (!ret) WINE_TRACE("failed to stop service %lu\n", GetLastError());
+            else query_service( manager, argv[2] );
             CloseServiceHandle( service );
         }
         else WINE_ERR("failed to open service %lu\n", GetLastError());

-- 
2.35.1

