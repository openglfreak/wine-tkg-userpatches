From: Mohamad Al-Jaf <mohamadaljaf@gmail.com>
Subject: [PATCH] api-ms-win-appmodel-runtime-l1-1-0: Add new dll.
Message-Id: <20211126063322.433790-1-mohamadaljaf@gmail.com>
Date: Fri, 26 Nov 2021 01:33:22 -0500

Fix error caused by some applications attempting to load
Windows Runtime support libraries. Example: Adobe Photoshop 2021
attempts to load WinRTSupport.dll.

Signed-off-by: Mohamad Al-Jaf <mohamadaljaf@gmail.com>
---
 configure                                                     | 2 ++
 configure.ac                                                  | 1 +
 dlls/api-ms-win-appmodel-runtime-l1-1-0/Makefile.in           | 1 +
 .../api-ms-win-appmodel-runtime-l1-1-0.spec                   | 4 ++++
 4 files changed, 8 insertions(+)
 create mode 100644 dlls/api-ms-win-appmodel-runtime-l1-1-0/Makefile.in
 create mode 100644 dlls/api-ms-win-appmodel-runtime-l1-1-0/api-ms-win-appmodel-runtime-l1-1-0.spec

diff --git a/configure b/configure
index d974d5b3324..67bcd371525 100755
--- a/configure
+++ b/configure
@@ -946,6 +946,7 @@ enable_advpack
 enable_amsi
 enable_amstream
 enable_api_ms_win_appmodel_identity_l1_1_0
+enable_api_ms_win_appmodel_runtime_l1_1_0
 enable_api_ms_win_appmodel_runtime_l1_1_1
 enable_api_ms_win_appmodel_runtime_l1_1_2
 enable_api_ms_win_core_apiquery_l1_1_0
@@ -20724,6 +20725,7 @@ wine_fn_config_makefile dlls/amsi enable_amsi
 wine_fn_config_makefile dlls/amstream enable_amstream
 wine_fn_config_makefile dlls/amstream/tests enable_tests
 wine_fn_config_makefile dlls/api-ms-win-appmodel-identity-l1-1-0 enable_api_ms_win_appmodel_identity_l1_1_0
+wine_fn_config_makefile dlls/api-ms-win-appmodel-runtime-l1-1-0 enable_api_ms_win_appmodel_runtime_l1_1_0
 wine_fn_config_makefile dlls/api-ms-win-appmodel-runtime-l1-1-1 enable_api_ms_win_appmodel_runtime_l1_1_1
 wine_fn_config_makefile dlls/api-ms-win-appmodel-runtime-l1-1-2 enable_api_ms_win_appmodel_runtime_l1_1_2
 wine_fn_config_makefile dlls/api-ms-win-core-apiquery-l1-1-0 enable_api_ms_win_core_apiquery_l1_1_0
diff --git a/configure.ac b/configure.ac
index 51ac2eb8e56..b69f738ebca 100644
--- a/configure.ac
+++ b/configure.ac
@@ -2407,6 +2407,7 @@ WINE_CONFIG_MAKEFILE(dlls/amsi)
 WINE_CONFIG_MAKEFILE(dlls/amstream)
 WINE_CONFIG_MAKEFILE(dlls/amstream/tests)
 WINE_CONFIG_MAKEFILE(dlls/api-ms-win-appmodel-identity-l1-1-0)
+WINE_CONFIG_MAKEFILE(dlls/api-ms-win-appmodel-runtime-l1-1-0)
 WINE_CONFIG_MAKEFILE(dlls/api-ms-win-appmodel-runtime-l1-1-1)
 WINE_CONFIG_MAKEFILE(dlls/api-ms-win-appmodel-runtime-l1-1-2)
 WINE_CONFIG_MAKEFILE(dlls/api-ms-win-core-apiquery-l1-1-0)
diff --git a/dlls/api-ms-win-appmodel-runtime-l1-1-0/Makefile.in b/dlls/api-ms-win-appmodel-runtime-l1-1-0/Makefile.in
new file mode 100644
index 00000000000..b04ec857dc9
--- /dev/null
+++ b/dlls/api-ms-win-appmodel-runtime-l1-1-0/Makefile.in
@@ -0,0 +1 @@
+MODULE    = api-ms-win-appmodel-runtime-l1-1-0.dll
diff --git a/dlls/api-ms-win-appmodel-runtime-l1-1-0/api-ms-win-appmodel-runtime-l1-1-0.spec b/dlls/api-ms-win-appmodel-runtime-l1-1-0/api-ms-win-appmodel-runtime-l1-1-0.spec
new file mode 100644
index 00000000000..acb4eb8b0a5
--- /dev/null
+++ b/dlls/api-ms-win-appmodel-runtime-l1-1-0/api-ms-win-appmodel-runtime-l1-1-0.spec
@@ -0,0 +1,4 @@
+@ stub GetApplicationUserModelId
+@ stdcall GetCurrentPackageFullName(ptr ptr) kernel32.GetCurrentPackageFullName
+@ stdcall GetPackageFullName(long ptr ptr) kernel32.GetPackageFullName
+@ stub PackageFamilyNameFromFullName

-- 
2.34.1

